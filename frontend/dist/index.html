<!DOCTYPE html>
<html>

<head>
  <title>Checkers Game Application</title>
</head>

<script type="module">
  import init, { add, multiply, renderCheckerGameState } from './without/without_a_bundler.js';

  async function run() {
    await init();
    const result = add(1, 2);
    window.add = add;
    window.multiply = multiply;

    window.renderCheckerGameState = renderCheckerGameState;
    window.rust_checker = new window.renderCheckerGameState();
    window.rust_checker.testy_test();

    // Memory testing.
    // const request = await fetch(rustLocation);
    // const wasmBuffer = await request.arrayBuffer();
    // const wasm = await WebAssembly.instantiate(wasmBuffer, importObj);
    // const { memory } = wasm.instance.exports;
    // memory.grow(Math.ceil(imgSize / (1 << 16)) * 2);
    // window.red_checker_list_raw = new Uint8ClampedArray(
    //   memory.buffer,
    //   window.rust_checker.red_checker_list_offset(),
    //   window.rust_checker.red_checker_list_size()
    // );


    console.log(`1 + 2 = ${result}`);
  }
  run();
</script>

<body>
  <div id="root"></div>
  <script src="./bundle.js"></script>
</body>

</html>